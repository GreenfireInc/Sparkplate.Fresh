# ENS Domain Resolution Setup Guide

## ðŸš¨ IMPORTANT: API Key Required

**ENS domain resolution is DISABLED by default** to prevent rate limiting issues with public RPC endpoints.

To enable ENS domain resolution, you **MUST** provide your own API key.

## Quick Setup (2 minutes)

### Option 1: Infura (Recommended)

1. **Sign up for free**: https://infura.io/
2. **Create a new project**
3. **Copy your Project ID**
4. **Create `.env` file** in project root:
   ```bash
   VITE_INFURA_PROJECT_ID=your_project_id_here
   ```
5. **Restart dev server**

### Option 2: Alchemy

1. **Sign up for free**: https://alchemy.com/
2. **Create a new app** (Ethereum Mainnet)
3. **Copy your API key**
4. **Create `.env` file** in project root:
   ```bash
   VITE_ALCHEMY_API_KEY=your_api_key_here
   ```
5. **Restart dev server**

## Why Is This Required?

### The Problem
- Public RPC endpoints have strict rate limits
- Multiple concurrent requests hit `429 Too Many Requests`
- Lookups timeout after failing all endpoints
- Poor user experience

### The Solution
- Use your own API key (free tier is plenty)
- Dedicated quota just for you
- Faster response times
- No rate limiting for normal usage

## What Happens Without an API Key?

âœ… **Wallet import still works perfectly**
- All functionality remains intact
- No errors shown to users
- Silent skip of domain resolution

âŒ **ENS domains won't be displayed**
- No automatic domain lookup
- Address shown only
- Must manually check ENS separately

## Console Output

### Without API Key
```
âš ï¸ [ENS] No API keys configured. ENS resolution disabled.
âš ï¸ [ENS] Set VITE_INFURA_PROJECT_ID or VITE_ALCHEMY_API_KEY in .env to enable.
ðŸ” [ENS] Starting reverse lookup for address: 0x...
â„¹ï¸ [ENS] Skipping resolution - no API keys configured
```

### With API Key
```
ðŸ”‘ [ENS] Using custom Infura key
ðŸ” [ENS] Starting reverse lookup for address: 0x...
ðŸ”— [ENS] Provider initialized, performing lookupAddress...
âœ… [ENS] Successfully resolved domain: yourname.eth
```

## Free Tier Limits

### Infura Free Tier
- **100,000 requests/day**
- **3 requests/second**
- More than enough for personal use

### Alchemy Free Tier
- **300 million compute units/month**
- **~300 requests/second burst**
- Extremely generous for development

## Step-by-Step Setup with Screenshots

### 1. Copy Example Environment File
```bash
cp .env.example .env
```

### 2. Get Infura API Key

**A. Go to https://infura.io/**
- Click "Get Started for Free"
- Sign up with email

**B. Create New Project**
- Dashboard â†’ "Create New Key"
- Select "Web3 API (Formerly Ethereum)"
- Name it "loginStandard ENS"

**C. Copy Project ID**
- Click on your project
- Copy the "Project ID" (NOT the Project Secret)

### 3. Add to .env File

Edit `.env` file:
```bash
# ENS Domain Resolution
VITE_INFURA_PROJECT_ID=abc123def456...  # Paste your Project ID here
```

### 4. Restart Application

```bash
# Stop the dev server (Ctrl+C)
npm run dev
```

### 5. Test It!

1. Open the application
2. Import an Ethereum private key
3. Check console for: `ðŸ”‘ [ENS] Using custom Infura key`
4. If address has ENS, domain will appear!

## Troubleshooting

### "Still seeing rate limit errors"
- Make sure you created a `.env` file (not `.env.example`)
- Verify the API key is correct (no extra spaces)
- Restart the dev server completely
- Check console shows "Using custom Infura key"

### "Domain still not showing"
- Verify the address actually has an ENS reverse record set
- Go to https://app.ens.domains/address/YOUR_ADDRESS
- Check if "Primary Name" is displayed
- If not, the address doesn't have a reverse record (even if it owns an ENS)

### "Invalid API key error"
- Double-check you copied the Project ID correctly
- Make sure it's the **Project ID**, not the Project Secret
- Try creating a new project if the key doesn't work

## Production Deployment

For production environments, set the environment variable in your deployment platform:

**Vercel:**
```
Settings â†’ Environment Variables â†’ Add
VITE_INFURA_PROJECT_ID = your_key_here
```

**Netlify:**
```
Site Settings â†’ Environment Variables â†’ Add variable
VITE_INFURA_PROJECT_ID = your_key_here
```

**Docker:**
```dockerfile
ENV VITE_INFURA_PROJECT_ID=your_key_here
```

## Security Notes

âš ï¸ **Never commit `.env` to git!**
- `.env` is in `.gitignore` by default
- Only commit `.env.example` (without actual keys)
- Each developer should have their own `.env` file

âœ… **API keys in `.env` are safe**
- They're only exposed in the browser (client-side)
- This is the intended use case for Infura/Alchemy
- They're meant for frontend applications
- Rate limits protect against abuse

## Cost Considerations

**Free tier is sufficient for:**
- Personal use
- Development
- Small projects
- Moderate traffic

**Consider paid tier if:**
- High traffic production app (>100k users/day)
- Need advanced features
- Want dedicated support
- Require SLA guarantees

## Alternative: Disable ENS Resolution

If you don't want ENS resolution at all:
- Simply don't create a `.env` file
- Feature is disabled by default
- No impact on other functionality
- Wallet import works perfectly

## Support

If you're still having issues:
1. Check console logs for specific errors
2. Verify API key in Infura/Alchemy dashboard
3. Test API key with curl:
   ```bash
   curl https://mainnet.infura.io/v3/YOUR_PROJECT_ID \
     -X POST \
     -H "Content-Type: application/json" \
     -d '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}'
   ```
4. Should return: `{"jsonrpc":"2.0","id":1,"result":"0x..."}`

---

**Quick Start**: Just get an Infura key (2 minutes), add it to `.env`, restart, done! ðŸŽ‰

