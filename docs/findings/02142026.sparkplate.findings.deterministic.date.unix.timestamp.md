# Deterministic GPG Key Generation: Understanding Unix Timestamps

**Date:** February 14, 2026  
**Component:** `deterministicGPG.individual.ts`  
**Topic:** Date Representation and Deterministic Key Generation  
**Status:** Documentation

---

## Overview

This document explains how the line `const DETERMINISTIC_DATE = new Date(1609459200000);` represents a date and why it's critical for deterministic GPG key generation in Sparkplate.

---

## The Line Explained

```typescript
const DETERMINISTIC_DATE = new Date(1609459200000);
```

### What Is This?

This line creates a JavaScript `Date` object from a **Unix timestamp** (also called "Unix time" or "epoch time").

---

## Understanding Unix Timestamps

### What is a Unix Timestamp?

A Unix timestamp is a single number that represents a specific point in time. It counts the number of **milliseconds** (in JavaScript) or **seconds** (in most other systems) that have elapsed since the **Unix Epoch**.

**The Unix Epoch:**
- Date: **January 1, 1970, 00:00:00 UTC**
- This is the "starting point" for Unix time
- Often written as: `1970-01-01T00:00:00.000Z`

### Breaking Down `1609459200000`

The number `1609459200000` is measured in **milliseconds** (JavaScript convention).

**Converting to seconds:**
```
1609459200000 milliseconds ÷ 1000 = 1609459200 seconds
```

**What date does this represent?**

Starting from the Unix Epoch (January 1, 1970) and adding 1,609,459,200 seconds brings us to:

**January 1, 2021, 00:00:00 UTC**

### Mathematical Breakdown

To verify this manually:

```
1609459200 seconds ÷ 60 = 26,824,320 minutes
26,824,320 minutes ÷ 60 = 447,072 hours  
447,072 hours ÷ 24 = 18,628 days
18,628 days ÷ 365.25 = ~51 years (accounting for leap years)

1970 + 51 years = 2021
```

The timestamp points to the exact start of January 1, 2021 (midnight UTC).

---

## Why Use a Fixed Date?

### The Problem: Non-Deterministic GPG Keys

When generating GPG keys, OpenPGP includes metadata such as:
- User ID
- Creation date
- Algorithm parameters

If the **creation date** changes each time a key is generated, the resulting:
- Public key will be different
- Private key will be different  
- **Fingerprint** will be different

This breaks determinism: the same input (mnemonic seed phrase) would produce different GPG keys on different days.

### The Solution: Fixed Timestamp

By hardcoding `DETERMINISTIC_DATE` to a specific point in time (January 1, 2021), Sparkplate ensures:

1. **Reproducibility**: Generating a GPG key from the same cryptocurrency private key will **always** produce the same key
2. **Fingerprint Stability**: The GPG fingerprint remains constant across regenerations
3. **Backup & Restore**: Users can reliably restore their GPG keys from their seed phrase

### Where It's Used

The `DETERMINISTIC_DATE` is passed to OpenPGP's key generation function:

```typescript
const { privateKey, publicKey } = await openpgp.generateKey({
  type: 'ecc',
  curve: 'ed25519Legacy',
  userIDs: [{ name: `${currency} Wallet`, email: `${currency.toLowerCase()}@wallet.local` }],
  date: DETERMINISTIC_DATE, // ← Fixed date ensures fingerprint reproducibility
  format: 'armored',
});
```

**Line 225 in `deterministicGPG.individual.ts`**

---

## Technical Context

### Why January 1, 2021?

The choice of January 1, 2021 is **arbitrary but deliberate**:

- **Not too old**: Avoids appearing as an ancient key
- **Not current**: Makes it clear the date is intentionally fixed (not "today")
- **Clean milestone**: Round year boundary (2021-01-01) is easy to remember and verify
- **Universally valid**: Well within the valid range for GPG key creation dates

### The Full Deterministic System

The fixed date is one component of Sparkplate's deterministic GPG generation system:

1. **Deterministic PRNG**: Uses SHA-256-based pseudo-random number generator seeded from the private key
2. **Fixed Date**: Ensures metadata is constant
3. **Patched Crypto**: Intercepts `crypto.getRandomValues()` to inject deterministic entropy
4. **Domain Separation**: Tags the seed with currency identifier to prevent cross-protocol attacks

Together, these ensure the same seed phrase → same GPG keys, every time.

---

## Alternative Representations

The same date can be represented in multiple formats:

| Format | Value |
|--------|-------|
| Unix timestamp (seconds) | `1609459200` |
| Unix timestamp (milliseconds) | `1609459200000` |
| ISO 8601 | `2021-01-01T00:00:00.000Z` |
| Human-readable | January 1, 2021, 00:00:00 UTC |
| JavaScript Date object | `new Date(1609459200000)` |

---

## Verification

You can verify this timestamp using various tools:

### JavaScript Console
```javascript
new Date(1609459200000).toISOString()
// Output: "2021-01-01T00:00:00.000Z"
```

### Unix Command Line
```bash
date -d @1609459200
# Output: Fri Jan  1 00:00:00 UTC 2021
```

### Python
```python
from datetime import datetime
datetime.utcfromtimestamp(1609459200)
# Output: datetime.datetime(2021, 1, 1, 0, 0)
```

---

## Key Insights

### Why Milliseconds?

JavaScript's `Date` constructor expects **milliseconds** since the Unix Epoch, not seconds. This is different from many Unix/Linux tools which use seconds.

- **Unix/Linux tools**: `1609459200` (seconds)
- **JavaScript `Date()`**: `1609459200000` (milliseconds)

### Impact on GPG Fingerprints

The GPG fingerprint is a cryptographic hash of the public key **and its metadata**. By fixing the creation date, we ensure:

```
HASH(public_key_data + metadata_including_date) = constant_fingerprint
```

If the date varied, the fingerprint would vary, breaking the link between seed phrase and GPG identity.

---

## Related Files

- **Source**: `src/lib/cores/cryptographyCore/deterministicGPG/deterministicGPG.individual.ts`
- **Seed Generation**: `src/lib/cores/cryptographyCore/deterministicGPG/deterministicGPG.seed.ts`
- **Usage**: `src/components/pageTabs/cryptocurrency/MnemonicSeedPhrase.vue`

---

## Conclusion

The line `const DETERMINISTIC_DATE = new Date(1609459200000);` is a carefully chosen **Unix timestamp** representing **January 1, 2021, midnight UTC**. It serves as a fixed creation date for GPG key generation, ensuring that the same cryptocurrency private key always produces the same GPG keypair and fingerprint.

This determinism is fundamental to Sparkplate's cryptographic architecture, enabling users to reliably backup, restore, and verify their cryptographic identities across different devices and time periods.

---

## References

1. [Unix Time - Wikipedia](https://en.wikipedia.org/wiki/Unix_time)
2. [OpenPGP Key Format - RFC 4880](https://tools.ietf.org/html/rfc4880)
3. [JavaScript Date Object - MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)
4. [Deterministic Key Generation - Best Practices](https://en.bitcoin.it/wiki/Deterministic_wallet)
