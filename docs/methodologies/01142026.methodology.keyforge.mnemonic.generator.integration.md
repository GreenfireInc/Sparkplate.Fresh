# Methodology: Integrating keyForge Mnemonic Seed Phrase Generator as a Tab in Cryptocurrency View

**Date:** January 14, 2026  
**Project:** Sparkplate.fresh  
**Target:** `src/views/Cryptocurrency.vue`  
**Source:** `00.references/from.keyForge`  
**Reference:** `00.references/from.keyForge/docs/rules/20251228.keyForge.vue.migration.integration.guide.md`

---

## Overview

This methodology outlines the step-by-step process for integrating the keyForge Mnemonic Seed Phrase Generator component into Sparkplate.fresh as a new tab within the existing Cryptocurrency view. The integration involves converting the React-based `SeedPhraseGenerator` component to Vue 3 Composition API and embedding it alongside the existing "Human Readable Addresses" and "Calculator" tabs.

---

## Table of Contents

1. [Prerequisites](#1-prerequisites)
2. [Component Structure Analysis](#2-component-structure-analysis)
3. [File Organization Strategy](#3-file-organization-strategy)
4. [Dependencies & Installation](#4-dependencies--installation)
5. [React to Vue Conversion Process](#5-react-to-vue-conversion-process)
6. [Integration Steps](#6-integration-steps)
7. [Testing & Validation](#7-testing--validation)
8. [Troubleshooting](#8-troubleshooting)

---

## 1. Prerequisites

### 1.1 Source Materials

- **keyForge Component:** `00.references/from.keyForge/src/components/SeedPhraseGenerator.tsx`
- **keyForge Utilities:** `00.references/from.keyForge/src/lib/` (crypto, export, import utilities)
- **Vue Migration Guide:** `00.references/from.keyForge/docs/rules/20251228.keyForge.vue.migration.integration.guide.md`

### 1.2 Existing Sparkplate.fresh Structure

```
src/
├── views/
│   └── Cryptocurrency.vue          # Target view (already has tab system)
├── components/
│   ├── pages/
│   │   └── cryptocurrency/
│   │       ├── DomainResolver.vue   # Existing tab 1
│   │       └── Calculator.vue       # Existing tab 2
│   └── global/
│       ├── TabComponent.vue         # Tab button component
│       └── TabsWrapper.vue          # Tab container component
```

### 1.3 Understanding the Current Tab System

The `Cryptocurrency.vue` view uses:
- **Vue 3 Composition API** with `<script setup>`
- **Tab management:** `activeTab` ref (string values: `'resolver'`, `'calculator'`)
- **Tab components:** `TabComponent` (individual tabs) and `TabsWrapper` (container)
- **Conditional rendering:** `v-if` on tab content divs

---

## 2. Component Structure Analysis

### 2.1 SeedPhraseGenerator Component (React Source)

**Location:** `00.references/from.keyForge/src/components/SeedPhraseGenerator.tsx`

**Key Features:**
- BIP39 mnemonic generation (12-24 words, multiple word counts)
- Seed phrase input/validation
- Copy to clipboard
- File import/export (JSON, TXT, CSV, PNG, PDF)
- GPG fingerprint generation
- Multiple modal integrations:
  - ChecksumModal
  - AdvancedModal
  - DerivationPathDiveModal
  - PrivateKeyToMnemonicModal
  - FileEncryptionModal

**State Management (React Hooks):**
```typescript
const [wordCount, setWordCount] = useState("12");
const [inputMode, setInputMode] = useState<"generate" | "input">("generate");
const [encryptionModalOpen, setEncryptionModalOpen] = useState(false);
// ... more state
```

**Props Interface:**
```typescript
interface SeedPhraseGeneratorProps {
  onSeedPhraseChange: (phrase: string) => void;
  seedPhrase: string;
  onGenerateWithIndices?: (indices: Record<string, number>) => Promise<void>;
  onRootGPGFingerprintChange?: (fingerprint: string | null) => void;
}
```

### 2.2 Dependencies Used

**React-specific (need Vue equivalents):**
- `react-hook-form` → `VeeValidate` or native Vue reactivity
- `useToast` hook → Vue composable (e.g., `useToast()`)
- `lucide-react` → `lucide-vue-next` ✅ (already in Sparkplate.fresh)
- `sonner` → Vue toast library

**Framework-agnostic (keep as-is):**
- `bip39` - BIP39 mnemonic generation
- `@noble/*` - Cryptographic utilities
- Export/import utilities from `lib/exportStandard/` and `lib/importStandard/`
- Crypto generation utilities

---

## 3. File Organization Strategy

### 3.1 Recommended File Structure

```
src/
├── views/
│   └── Cryptocurrency.vue                    # Add new tab here
├── components/
│   ├── pages/
│   │   └── cryptocurrency/
│   │       ├── DomainResolver.vue
│   │       ├── Calculator.vue
│   │       └── SeedPhraseGenerator.vue       # NEW: Converted Vue component
│   └── modals/                               # NEW: Modal components directory
│       └── keyforge/
│           ├── ChecksumModal.vue
│           ├── AdvancedModal.vue
│           ├── DerivationPathDiveModal.vue
│           ├── PrivateKeyToMnemonicModal.vue
│           └── FileEncryptionModal.vue
├── lib/
│   └── keyforge/                             # NEW: Copy framework-agnostic utils
│       ├── exportStandard/
│       │   └── currencies/
│       │       ├── filenameStructureAndContent.seed.text.ts
│       │       └── filenameStructureAndContent.seed.visual.ts
│       ├── importStandard/
│       │   └── fileImports.seed.ts
│       └── cryptographyCore/
│           └── deterministicGPG/
│               └── deterministicGPG.seed.ts
```

### 3.2 Copy Strategy

**Phase 1: Framework-Agnostic Code (No Changes)**
1. Copy entire `lib/` directory from keyForge to `src/lib/keyforge/`
2. Verify all imports work (adjust paths if needed)
3. These files are pure TypeScript - no React/Vue dependencies

**Phase 2: UI Components (Convert to Vue)**
1. Convert `SeedPhraseGenerator.tsx` → `SeedPhraseGenerator.vue`
2. Convert modal components one by one
3. Update all imports to Vue equivalents

---

## 4. Dependencies & Installation

### 4.1 Required NPM Packages

**Check if already installed:**
```bash
npm list bip39 bip32 @noble/curves @noble/hashes @noble/secp256k1
```

**Install missing dependencies:**
```bash
npm install bip39 bip32
npm install qrcode jspdf html2canvas  # For export functionality
npm install lucide-vue-next            # Should already be installed
```

### 4.2 Vue Toast Solution

**Option A: Use existing toast system in Sparkplate.fresh**
- Check if there's already a toast composable
- If not, install `vue-sonner` or `vue-toastification`

**Option B: Create simple toast composable**
```typescript
// composables/useToast.ts
import { ref } from 'vue'

export function useToast() {
  const showToast = (message: string, type: 'success' | 'error' = 'success') => {
    // Implement toast notification
  }
  return { showToast }
}
```

---

## 5. React to Vue Conversion Process

### 5.1 State Management Conversion

**React (Hooks):**
```typescript
const [wordCount, setWordCount] = useState("12");
const [seedPhrase, setSeedPhrase] = useState("");
```

**Vue 3 (Composition API):**
```typescript
const wordCount = ref("12");
const seedPhrase = ref("");
```

### 5.2 Effect Hooks Conversion

**React:**
```typescript
useEffect(() => {
  // Side effect logic
}, [seedPhrase]);
```

**Vue:**
```typescript
import { watch } from 'vue'

watch(seedPhrase, (newValue) => {
  // Side effect logic
});
```

### 5.3 Event Handlers Conversion

**React:**
```typescript
const handleGenerate = () => {
  // Logic
};
```

**Vue:**
```typescript
const handleGenerate = () => {
  // Logic (same, just use refs instead of state setters)
};
```

### 5.4 Component Props Conversion

**React:**
```typescript
interface Props {
  onSeedPhraseChange: (phrase: string) => void;
  seedPhrase: string;
}

export const SeedPhraseGenerator = ({ onSeedPhraseChange, seedPhrase }: Props) => {
  // Component body
};
```

**Vue:**
```vue
<script setup lang="ts">
interface Props {
  seedPhrase: string;
  onSeedPhraseChange?: (phrase: string) => void;
  onGenerateWithIndices?: (indices: Record<string, number>) => Promise<void>;
  onRootGPGFingerprintChange?: (fingerprint: string | null) => void;
}

const props = defineProps<Props>();
const emit = defineEmits<{
  'update:seedPhrase': [value: string]
  'rootGPGFingerprintChange': [fingerprint: string | null]
}>();

// Use emit('update:seedPhrase', newValue) instead of onSeedPhraseChange callback
</script>
```

### 5.5 UI Component Library Conversion

**Option A: Use Radix Vue (if available)**
- Similar API to Radix UI (React)
- Check: `npm list radix-vue`

**Option B: Use existing Sparkplate.fresh UI components**
- Check what UI components are already available
- May need to create simple equivalents if not available

**Option C: Create minimal UI components**
- Button, Input, Textarea, Select, Switch can be simple Vue components
- Use Tailwind CSS for styling (already in project)

---

## 6. Integration Steps

### Step 1: Copy Framework-Agnostic Utilities

```bash
# Create directory structure
mkdir -p src/lib/keyforge/exportStandard/currencies
mkdir -p src/lib/keyforge/importStandard
mkdir -p src/lib/keyforge/cryptographyCore/deterministicGPG

# Copy TypeScript files (no React dependencies)
cp -r 00.references/from.keyForge/src/lib/exportStandard/* src/lib/keyforge/exportStandard/
cp -r 00.references/from.keyForge/src/lib/importStandard/* src/lib/keyforge/importStandard/
cp -r 00.references/from.keyForge/src/lib/cryptographyCore/* src/lib/keyforge/cryptographyCore/

# Fix import paths in copied files
# Change: @/lib/exportStandard/...
# To:     @/lib/keyforge/exportStandard/...
```

### Step 2: Create Vue Component Structure

**Create:** `src/components/pages/cryptocurrency/SeedPhraseGenerator.vue`

**Initial structure:**
```vue
<template>
  <div class="seed-phrase-generator">
    <!-- Component content -->
  </div>
</template>

<script setup lang="ts">
import { ref, watch } from 'vue'
import * as bip39 from 'bip39'
// Import utilities from lib/keyforge

// Props and emits
interface Props {
  modelValue?: string
}

const props = withDefaults(defineProps<Props>(), {
  modelValue: ''
})

const emit = defineEmits<{
  'update:modelValue': [value: string]
  'rootGPGFingerprintChange': [fingerprint: string | null]
}>()

// State
const wordCount = ref('12')
const inputMode = ref<'generate' | 'input'>('generate')
const seedPhrase = ref(props.modelValue || '')

// Watch for external changes
watch(() => props.modelValue, (newValue) => {
  seedPhrase.value = newValue || ''
})

// Watch for internal changes
watch(seedPhrase, (newValue) => {
  emit('update:modelValue', newValue)
})

// Methods
const generateMnemonic = () => {
  const count = parseInt(wordCount.value)
  const entropyBits = getEntropyBits(count)
  const mnemonic = bip39.generateMnemonic(entropyBits)
  seedPhrase.value = mnemonic
}

// ... more methods
</script>

<style scoped>
/* Component styles */
</style>
```

### Step 3: Add Tab to Cryptocurrency.vue

**Update:** `src/views/Cryptocurrency.vue`

```vue
<template>
  <div class="view">
    <h1 class="view-name">::Cryptocurrency::</h1>
    <br>

    <!-- Tab Navigation -->
    <TabsWrapper class="tabs-container">
      <TabComponent
        :active="activeTab === 'resolver'"
        :onClick="() => (activeTab = 'resolver')"
      >
        Human Readable Addresses
      </TabComponent>
      <TabComponent
        :active="activeTab === 'calculator'"
        :onClick="() => (activeTab = 'calculator')"
      >
        Calculator
      </TabComponent>
      <TabComponent
        :active="activeTab === 'seedGenerator'"
        :onClick="() => (activeTab = 'seedGenerator')"
      >
        Seed Phrase Generator
      </TabComponent>
    </TabsWrapper>

    <!-- Tab Content -->
    <div id="tabContent">
      <!-- Human Readable Addresses Content -->
      <div v-if="activeTab === 'resolver'" id="resolver-content" role="tabpanel">
        <domain-resolver />
      </div>

      <!-- Calculator Content -->
      <div v-if="activeTab === 'calculator'" id="calculator-content" role="tabpanel">
        <cryptocurrency-calculator />
      </div>

      <!-- Seed Phrase Generator Content -->
      <div v-if="activeTab === 'seedGenerator'" id="seed-generator-content" role="tabpanel">
        <seed-phrase-generator v-model="seedPhrase" @rootGPGFingerprintChange="handleGPGFingerprintChange" />
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import DomainResolver from '../components/pages/cryptocurrency/DomainResolver.vue'
import CryptocurrencyCalculator from '../components/pages/cryptocurrency/Calculator.vue'
import SeedPhraseGenerator from '../components/pages/cryptocurrency/SeedPhraseGenerator.vue'
import TabComponent from '@/components/global/TabComponent.vue'
import TabsWrapper from '@/components/global/TabsWrapper.vue'

defineOptions({
  name: 'CryptocurrencyView'
})

const activeTab = ref('resolver')
const seedPhrase = ref('')

const handleGPGFingerprintChange = (fingerprint: string | null) => {
  // Handle GPG fingerprint changes if needed
  console.log('GPG Fingerprint:', fingerprint)
}
</script>
```

### Step 4: Convert Modal Components

**Create modal components in:** `src/components/modals/keyforge/`

**Example: ChecksumModal.vue**
```vue
<template>
  <Teleport to="body">
    <Transition name="modal">
      <div v-if="isOpen" class="modal-overlay" @click.self="close">
        <div class="modal-content">
          <!-- Modal content from React version -->
        </div>
      </div>
    </Transition>
  </Teleport>
</template>

<script setup lang="ts">
import { Teleport, Transition } from 'vue'

interface Props {
  isOpen: boolean
  seedPhrase: string
}

const props = defineProps<Props>()
const emit = defineEmits<{
  'update:isOpen': [value: boolean]
  'close': []
}>()

const close = () => {
  emit('update:isOpen', false)
  emit('close')
}
</script>
```

### Step 5: Implement Export Functionality

**Reuse utilities from:** `src/lib/keyforge/exportStandard/currencies/`

```typescript
import {
  generateSeedFilename,
  generateSeedJSONContent,
  generateSeedTXTContent,
  generateSeedCSVContent,
  exportSeedPhraseAsPNG,
  exportSeedPhraseAsPDF,
} from '@/lib/keyforge/exportStandard/currencies/filenameStructureAndContent.seed.text'

const downloadSeedPhrase = async (format: 'json' | 'txt' | 'csv' | 'png' | 'pdf') => {
  // Implementation using copied utilities
}
```

### Step 6: Implement Import Functionality

**Reuse utilities from:** `src/lib/keyforge/importStandard/`

```typescript
import { importSeedPhraseFromFile } from '@/lib/keyforge/importStandard/fileImports.seed'

const handleFileImport = async (file: File) => {
  try {
    const imported = await importSeedPhraseFromFile(file)
    seedPhrase.value = imported
  } catch (error) {
    // Handle error
  }
}
```

---

## 7. Testing & Validation

### 7.1 Functional Testing Checklist

- [ ] **Mnemonic Generation**
  - [ ] Generate 12-word mnemonic
  - [ ] Generate 24-word mnemonic
  - [ ] Generate other word counts (13, 15, 18, 21, etc.)
  - [ ] Verify BIP39 compliance

- [ ] **Seed Phrase Input**
  - [ ] Paste valid mnemonic
  - [ ] Validate checksum
  - [ ] Handle invalid input

- [ ] **Copy to Clipboard**
  - [ ] Copy seed phrase
  - [ ] Verify clipboard content

- [ ] **File Export**
  - [ ] Export as JSON
  - [ ] Export as TXT
  - [ ] Export as CSV
  - [ ] Export as PNG
  - [ ] Export as PDF
  - [ ] Verify file formats and content

- [ ] **File Import**
  - [ ] Import from JSON
  - [ ] Import from TXT
  - [ ] Import from CSV
  - [ ] Handle invalid files

- [ ] **GPG Fingerprint**
  - [ ] Generate fingerprint on seed change
  - [ ] Display fingerprint correctly
  - [ ] Copy fingerprint to clipboard

- [ ] **Modal Interactions**
  - [ ] Open/close all modals
  - [ ] Test modal functionality
  - [ ] Verify state management

### 7.2 Integration Testing

- [ ] Tab switching works correctly
- [ ] Component doesn't interfere with other tabs
- [ ] State persists when switching tabs (if desired)
- [ ] Component unmounts/remounts correctly

### 7.3 Cryptographic Validation

- [ ] Verify generated mnemonics are valid BIP39
- [ ] Test with known test vectors
- [ ] Verify GPG fingerprint generation
- [ ] Test export formats match expected output

---

## 8. Troubleshooting

### 8.1 Common Issues

**Issue: Import path errors**
- **Solution:** Update all imports in copied `lib/keyforge/` files to use `@/lib/keyforge/` prefix

**Issue: Missing dependencies**
- **Solution:** Run `npm install` for any missing packages listed in Step 4.1

**Issue: Vue reactivity not working**
- **Solution:** Ensure using `ref()` for reactive state, `watch()` for side effects

**Issue: Modal not appearing**
- **Solution:** Check `Teleport` implementation and z-index values

**Issue: Export functions failing**
- **Solution:** Verify browser compatibility for `html2canvas` and `jspdf`

**Issue: GPG generation failing**
- **Solution:** Check WebAssembly support, verify `vite-plugin-wasm` is configured

### 8.2 Debugging Tips

1. **Check browser console** for import errors
2. **Verify Vite config** includes necessary plugins (WASM, node polyfills)
3. **Test utilities independently** before integrating into component
4. **Use Vue DevTools** to inspect component state
5. **Check Network tab** for failed resource loads

---

## 9. Additional Considerations

### 9.1 Performance

- **Lazy loading:** Consider lazy-loading the SeedPhraseGenerator component if it's heavy
- **GPG generation:** This is CPU-intensive - consider debouncing or using Web Workers

### 9.2 Security

- **Private keys:** Ensure seed phrases are never logged or stored
- **Memory cleanup:** Clear sensitive data from memory when component unmounts
- **File handling:** Validate all imported files before processing

### 9.3 User Experience

- **Loading states:** Show loading indicators for async operations (GPG generation, exports)
- **Error handling:** Provide clear error messages for invalid inputs
- **Accessibility:** Ensure modals and forms are keyboard navigable

---

## 10. Completion Checklist

- [ ] All framework-agnostic utilities copied to `src/lib/keyforge/`
- [ ] Import paths updated in copied utilities
- [ ] SeedPhraseGenerator.vue component created and functional
- [ ] All modal components converted and working
- [ ] Tab added to Cryptocurrency.vue
- [ ] Export functionality working (all formats)
- [ ] Import functionality working
- [ ] GPG fingerprint generation working
- [ ] All tests passing
- [ ] Code reviewed and documented
- [ ] User acceptance testing completed

---

## References

- **Vue Migration Guide:** `00.references/from.keyForge/docs/rules/20251228.keyForge.vue.migration.integration.guide.md`
- **keyForge Component:** `00.references/from.keyForge/src/components/SeedPhraseGenerator.tsx`
- **Vue 3 Composition API:** https://vuejs.org/guide/extras/composition-api-faq.html
- **BIP39 Specification:** https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki
- **Tab Component Reference:** `src/components/global/TabComponent.vue`

---

**Document Version:** 1.0  
**Last Updated:** January 14, 2026  
**Status:** Draft for Implementation
